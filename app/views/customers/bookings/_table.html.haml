- total_dives      = bookings.size
- guided_dives     = bookings.joins{event}.merge(Event.guided_dives).size
- non_guided_dives = total_dives - guided_dives
- boat_dives       = bookings.joins{event}.merge(Event.boat_dives).size
- night_dives      = bookings.joins{event}.merge(Event.night_dives).size
- total_price      = bookings.to_a.sum { |b| b.price || 0 }

%table.table.table-striped
  %thead
    %tr
      %th
        = icon 'fw'
        Event
      %th
        Trip
      %th{colspan: 3}
      %th.text-right Price
      %th
  %tbody
    = render partial: 'row', collection: bookings, as: :booking
  %tfooter
    %tr
      %td
        %strong Total
      %td
        %strong= total_dives
        = 'dive'.pluralize(total_dives)
      %td
        = icon 'star'
        %strong= guided_dives
        = ' / '
        = icon 'star-o'
        %strong= non_guided_dives
      %td
        = icon 'anchor'
        %strong= boat_dives
      %td
        = icon 'moon-o'
        %strong= night_dives
      %td.text-right
        = icon :money
        %strong= '%0.2f' % total_price
      %td
